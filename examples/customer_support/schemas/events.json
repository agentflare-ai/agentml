{
  "openapi": "3.0.0",
  "info": {
    "title": "Customer Support Agent Event Schemas",
    "version": "1.0.0",
    "description": "Event schemas for the customer support agent, defining all possible events and their data structures"
  },
  "components": {
    "schemas": {
      "FlightIntent": {
        "type": "object",
        "description": "User intent to perform a flight-related action such as searching for flights, booking a new flight, updating an existing booking, or canceling a flight reservation",
        "properties": {
          "category": {
            "const": "flight",
            "description": "Category identifier that must be 'flight' to route this request to the flight handling service"
          },
          "action": {
            "type": "string",
            "enum": ["search", "book", "update", "cancel", "inquiry"],
            "description": "The specific flight action: 'search' to find available flights, 'book' to make a new reservation, 'update' to modify an existing booking, 'cancel' to cancel a reservation, or 'inquiry' to get flight information"
          },
          "details": {
            "type": "object",
            "description": "Flight-specific information extracted from the user's message, such as departure/arrival locations, dates, passenger details, and booking references",
            "properties": {
              "from": {
                "type": "string",
                "description": "Departure location: city name (e.g., 'New York', 'Paris') or IATA airport code (e.g., 'JFK', 'CDG')"
              },
              "to": {
                "type": "string",
                "description": "Destination location: city name or IATA airport code where the passenger wants to fly"
              },
              "date": {
                "type": "string",
                "format": "date",
                "description": "Departure date in ISO 8601 format (YYYY-MM-DD), e.g., '2025-10-20'"
              },
              "return_date": {
                "type": "string",
                "format": "date",
                "description": "Return date for round-trip flights in ISO 8601 format (YYYY-MM-DD)"
              },
              "passengers": {
                "type": "integer",
                "description": "Number of passengers traveling, default is 1"
              },
              "booking_id": {
                "type": "string",
                "description": "Existing booking reference number for update or cancel operations"
              }
            }
          }
        },
        "required": ["category", "action"]
      },
      "HotelIntent": {
        "type": "object",
        "description": "User intent to perform a hotel-related action such as searching for accommodations, making a reservation, modifying an existing booking, or canceling a hotel stay",
        "properties": {
          "category": {
            "const": "hotel",
            "description": "Category identifier that must be 'hotel' to route this request to the hotel handling service"
          },
          "action": {
            "type": "string",
            "enum": ["search", "book", "update", "cancel", "inquiry"],
            "description": "The specific hotel action: 'search' to find available hotels, 'book' to make a reservation, 'update' to modify a booking, 'cancel' to cancel a reservation, or 'inquiry' to get hotel information"
          },
          "details": {
            "type": "object",
            "description": "Hotel-specific information including location, check-in/check-out dates, room preferences, and booking details",
            "properties": {
              "location": {
                "type": "string",
                "description": "City or area where the user wants to stay (e.g., 'Paris', 'downtown Manhattan', 'near CDG airport')"
              },
              "checkin_date": {
                "type": "string",
                "format": "date",
                "description": "Check-in date in ISO 8601 format (YYYY-MM-DD)"
              },
              "checkout_date": {
                "type": "string",
                "format": "date",
                "description": "Check-out date in ISO 8601 format (YYYY-MM-DD)"
              },
              "guests": {
                "type": "integer",
                "description": "Number of guests staying, default is 1"
              },
              "rooms": {
                "type": "integer",
                "description": "Number of rooms needed, default is 1"
              },
              "booking_id": {
                "type": "string",
                "description": "Existing hotel booking reference number for update or cancel operations"
              }
            }
          }
        },
        "required": ["category", "action"]
      },
      "CarIntent": {
        "type": "object",
        "description": "User intent to perform a car rental action such as searching for available vehicles, making a rental reservation, modifying an existing rental, or canceling a car rental",
        "properties": {
          "category": {
            "const": "car",
            "description": "Category identifier that must be 'car' to route this request to the car rental handling service"
          },
          "action": {
            "type": "string",
            "enum": ["search", "book", "update", "cancel", "inquiry"],
            "description": "The specific car rental action: 'search' to find available vehicles, 'book' to reserve a car, 'update' to modify a rental, 'cancel' to cancel a reservation, or 'inquiry' to get rental information"
          },
          "details": {
            "type": "object",
            "description": "Car rental-specific information including pickup/dropoff locations and dates, vehicle preferences, and rental details",
            "properties": {
              "location": {
                "type": "string",
                "description": "Pickup location for the rental car (city name, airport code, or specific address)"
              },
              "pickup_date": {
                "type": "string",
                "format": "date",
                "description": "Date when the user wants to pick up the rental car in ISO 8601 format (YYYY-MM-DD)"
              },
              "dropoff_date": {
                "type": "string",
                "format": "date",
                "description": "Date when the user will return the rental car in ISO 8601 format (YYYY-MM-DD)"
              },
              "dropoff_location": {
                "type": "string",
                "description": "Return location if different from pickup location"
              },
              "vehicle_type": {
                "type": "string",
                "description": "Preferred vehicle type (e.g., 'compact', 'SUV', 'luxury', 'electric')"
              },
              "booking_id": {
                "type": "string",
                "description": "Existing car rental booking reference number for update or cancel operations"
              }
            }
          }
        },
        "required": ["category", "action"]
      },
      "ExcursionIntent": {
        "type": "object",
        "description": "User intent to explore or book travel excursions, activities, tours, or trip recommendations at their destination",
        "properties": {
          "category": {
            "const": "excursion",
            "description": "Category identifier that must be 'excursion' to route this request to the excursion and activity handling service"
          },
          "action": {
            "type": "string",
            "enum": ["search", "book", "update", "cancel", "inquiry"],
            "description": "The specific excursion action: 'search' to find activities and tours, 'book' to reserve an excursion, 'update' to modify a booking, 'cancel' to cancel an activity, or 'inquiry' to get recommendations"
          },
          "details": {
            "type": "object",
            "description": "Excursion-specific information including destination, interests, dates, and booking details",
            "properties": {
              "location": {
                "type": "string",
                "description": "Destination where the user wants activities or tours (city, region, or landmark)"
              },
              "interests": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "User's interests to help recommend suitable activities (e.g., 'history', 'adventure', 'food', 'nature', 'culture')"
              },
              "date": {
                "type": "string",
                "format": "date",
                "description": "Preferred date for the excursion in ISO 8601 format (YYYY-MM-DD)"
              },
              "participants": {
                "type": "integer",
                "description": "Number of people participating in the excursion"
              },
              "booking_id": {
                "type": "string",
                "description": "Existing excursion booking reference number for update or cancel operations"
              }
            }
          }
        },
        "required": ["category", "action"]
      },
      "PolicyIntent": {
        "type": "object",
        "description": "User inquiry about airline policies, rules, or procedures such as baggage allowance, cancellation terms, change fees, loyalty programs, or other company policies",
        "properties": {
          "category": {
            "const": "policy",
            "description": "Category identifier that must be 'policy' to route this request to the policy lookup service"
          },
          "action": {
            "type": "string",
            "description": "The type of policy inquiry (e.g., 'inquiry', 'lookup')"
          },
          "query": {
            "type": "string",
            "description": "The user's policy question or the specific policy topic they want to know about (e.g., 'baggage allowance', 'cancellation policy', 'change fees', 'loyalty program')"
          }
        },
        "required": ["category"]
      },
      "GeneralIntent": {
        "type": "object",
        "description": "General conversational intent that doesn't fit into specific service categories, such as greetings, small talk, general questions about services, or other non-transactional interactions",
        "properties": {
          "category": {
            "const": "general",
            "description": "Category identifier that must be 'general' for non-specific service requests"
          },
          "message": {
            "type": "string",
            "description": "The general message or inquiry from the user that requires a conversational response"
          }
        },
        "required": ["category"]
      },
      "ActionRequiresConfirmation": {
        "type": "object",
        "description": "Event indicating that the user's requested action requires explicit confirmation before execution, typically for sensitive operations like booking, updating, or canceling reservations that have financial or contractual implications",
        "properties": {
          "action_type": {
            "type": "string",
            "description": "The type of action requiring confirmation (e.g., 'flight_booking', 'hotel_booking', 'car_rental', 'cancellation', 'modification') to track what the user is confirming"
          },
          "details": {
            "type": "object",
            "description": "Complete details of the action that needs confirmation, including all relevant information that will be executed if the user approves"
          },
          "confirmation_message": {
            "type": "string",
            "description": "Human-readable message to present to the user explaining what they are about to confirm, including key details like dates, prices, and terms"
          }
        },
        "required": ["action_type", "confirmation_message"]
      },
      "ActionResponse": {
        "type": "object",
        "description": "Event containing an informational response to provide to the user, used for queries, status updates, search results, or any communication that doesn't require user confirmation",
        "properties": {
          "message": {
            "type": "string",
            "description": "The complete response message to display to the user, formatted in a clear and helpful manner"
          }
        },
        "required": ["message"]
      },
      "ActionNeedsInfo": {
        "type": "object",
        "description": "Event indicating that the agent needs additional information from the user to complete their request, used when the user's message is missing required details",
        "properties": {
          "message": {
            "type": "string",
            "description": "A friendly message asking the user for the missing information, explaining what is needed and why"
          },
          "missing_fields": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of specific field names or information categories that are missing and need to be provided by the user (e.g., 'departure_date', 'destination', 'number_of_passengers')"
          }
        },
        "required": ["message"]
      },
      "ConfirmationAccepted": {
        "type": "object",
        "description": "User has accepted and confirmed the proposed action, indicating they want to proceed with the booking, cancellation, modification, or other operation that was presented for confirmation",
        "properties": {
          "confirmed": {
            "const": true,
            "description": "Confirmation status that must be exactly true for this acceptance event, indicating user approval"
          }
        },
        "required": ["confirmed"]
      },
      "ConfirmationDeclined": {
        "type": "object",
        "description": "User has declined or rejected the proposed action, indicating they do not want to proceed with the operation that was presented for confirmation",
        "properties": {
          "confirmed": {
            "const": false,
            "description": "Confirmation status that must be exactly false for this decline event, indicating user rejection"
          }
        },
        "required": ["confirmed"]
      },
      "ActionSearch": {
        "type": "object",
        "description": "Event indicating a search operation should be performed to find available options (flights, hotels, cars, excursions) without requiring user confirmation since this is a read-only operation",
        "properties": {
          "search_type": {
            "type": "string",
            "enum": ["flight", "hotel", "car", "excursion"],
            "description": "The type of search to perform: flight search, hotel search, car rental search, or excursion search"
          },
          "criteria": {
            "type": "object",
            "description": "Search criteria specific to the search type, such as location, dates, passenger count, etc."
          }
        },
        "required": ["search_type"]
      },
      "CompleteOrEscalate": {
        "type": "object",
        "description": "Event generated by a specialized assistant to return control to the primary assistant, either because the specialist's task is complete or because the user's request is outside the specialist's scope and needs to be handled by a different specialist or the primary assistant",
        "properties": {
          "reason": {
            "type": "string",
            "enum": ["task_complete", "out_of_scope", "user_changed_mind", "needs_different_specialist"],
            "description": "The reason for returning control: task is complete, request is outside specialist's scope, user changed their mind, or user needs a different specialist"
          },
          "message": {
            "type": "string",
            "description": "Optional message explaining why control is being returned to the primary assistant"
          }
        },
        "required": ["reason"]
      }
    }
  }
}
